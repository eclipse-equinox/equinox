name: "Copilot Setup Steps"

# Automatically run the setup steps when they are changed to allow for easy validation, and
# allow manual testing through the repository's "Actions" tab
# DO NOT EDIT or RENAME this file!
# see https://docs.github.com/en/enterprise-cloud@latest/copilot/how-tos/use-copilot-agents/coding-agent/customize-the-agent-environment

on:
  workflow_dispatch:
  pull_request:
    paths:
      - .github/workflows/copilot-setup-steps.yml

jobs:
   # The job MUST be called `copilot-setup-steps` or it will not be picked up by Copilot.
   
  copilot-setup-steps:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
# FIXME: For some reasons this completely breaks github copilot own checkout procedure, disabled for now
#
#      - uses: actions/checkout@v5
#        with:
#          fetch-depth: 0 # required for jgit timestamp provider to work
#          path: equinox
#      - name: checkout equinox.binaries
#        uses: actions/checkout@v5
#        with:
#          fetch-depth: 1 # only shallow here, we don't have jgit timestamps
#          repository: eclipse-equinox/equinox.binaries
#          path: equinox.binaries

      - name: Set up JDK 21
        uses: actions/setup-java@v5
        with:
          java-version: |
            8
            17
            21
          distribution: 'temurin'
#          cache: 'maven'

      - name: Set up Maven 3.9.12
        uses: stCarolas/setup-maven@v5
        with:
          maven-version: '3.9.12'
